{"componentChunkName":"component---src-templates-blog-js","path":"/blog/my-diy-smart-sprinklers","result":{"data":{"markdownRemark":{"fields":{"slug":"my-diy-smart-sprinklers"},"frontmatter":{"title":"My DIY Smart Sprinklers","author":"Tom Rodrigues","date":"May 5th, 2020","hero_image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQACBv/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABId5PYmYO0//EABsQAAIDAAMAAAAAAAAAAAAAAAECAAMEESEj/9oACAEBAAEFAk9GqsuRH26w6kzkiEd//8QAFREBAQAAAAAAAAAAAAAAAAAAABL/2gAIAQMBAT8BhL//xAAWEQADAAAAAAAAAAAAAAAAAAAAARL/2gAIAQIBAT8BplM//8QAHxAAAQIGAwAAAAAAAAAAAAAAAQACAwQQERJRISNx/9oACAEBAAY/As4ly7ZVmzOOgeQj2k+I1//EABkQAQADAQEAAAAAAAAAAAAAAAEAESExQf/aAAgBAQABPyGqovVJh8LokDvI9IEzLw5PIwlT/9oADAMBAAIAAwAAABDTL//EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8QSaQf/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QY3//xAAbEAEAAwEBAQEAAAAAAAAAAAABABEhMVFhcf/aAAgBAQABPxAo9qXa+37K1MDIO+X2FElFi/glyxsDCcnC4byJSb8an//Z","aspectRatio":1.7772511848341233,"src":"/static/1db3390b5b89a63062288319800a7f14/398d8/hero.jpg","srcSet":"/static/1db3390b5b89a63062288319800a7f14/8def4/hero.jpg 375w,\n/static/1db3390b5b89a63062288319800a7f14/35c3d/hero.jpg 750w,\n/static/1db3390b5b89a63062288319800a7f14/398d8/hero.jpg 1500w,\n/static/1db3390b5b89a63062288319800a7f14/0e37b/hero.jpg 2250w,\n/static/1db3390b5b89a63062288319800a7f14/9927d/hero.jpg 3000w,\n/static/1db3390b5b89a63062288319800a7f14/f3ad5/hero.jpg 3578w","sizes":"(max-width: 1500px) 100vw, 1500px"}}}},"html":"<p>Smart sprinkler systems are some of the most popular smart home accessories, and can make a noticeable difference to your garden's health.</p>\n<p>Features like weather forecasting allow smart sprinkler systems to look at the weather conditions for the next few days to determine factors such as rainfall, temperature, and cloud cover.</p>\n<p>Using this information, the controller can adjust watering schedules and durations for each of the zones, and spread this across multiple cycles to optimise the conditions needed for each inidivdual garden.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAXAQADAQAAAAAAAAAAAAAAAAABAgME/9oADAMBAAIQAxAAAAHOkXClI5Y//8QAGhAAAgIDAAAAAAAAAAAAAAAAARIAAgMRIf/aAAgBAQABBQIgXxIRL3DHarxzP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABcRAQADAAAAAAAAAAAAAAAAAAABEhP/2gAIAQIBAT8B0ld//8QAHxAAAQMDBQAAAAAAAAAAAAAAAQACERIhMQMQIkFx/9oACAEBAAY/Amw6nU7KmqXeLmLrMXRMnG3/xAAaEAEAAwEBAQAAAAAAAAAAAAABABFBIRAx/9oACAEBAAE/Iay7tEQ+Rfaz0cM2DdchaAriwhRDJ4P/2gAMAwEAAgADAAAAEFzv/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EBV//8QAGREAAwADAAAAAAAAAAAAAAAAAAERMYGh/9oACAECAQE/EGx2zQnmOn//xAAdEAEBAAICAwEAAAAAAAAAAAABEQAhYXExQYGx/9oACAEBAAE/EDJ8HQFBJ5IYZ0ENzpujAu0SpH49/cSgEoaWb3V5uKhETcND6+Yk7u+c/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/da9d659dba41d02ec8a9ca5e248a744f/4edc6/rain.jpg\"\n        srcset=\"/static/da9d659dba41d02ec8a9ca5e248a744f/b6501/rain.jpg 250w,\n/static/da9d659dba41d02ec8a9ca5e248a744f/bb312/rain.jpg 500w,\n/static/da9d659dba41d02ec8a9ca5e248a744f/4edc6/rain.jpg 1000w,\n/static/da9d659dba41d02ec8a9ca5e248a744f/92dea/rain.jpg 1500w,\n/static/da9d659dba41d02ec8a9ca5e248a744f/cbe2c/rain.jpg 2000w,\n/static/da9d659dba41d02ec8a9ca5e248a744f/2e69d/rain.jpg 2550w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>However, as I outlined in my post about <a href=\"https://tommrodrigues.github.io/blog/my-dollar99-apple-smart-home\">My $99 Apple Smart Home</a>, not all of us are willing to foot the $300+ price tag that comes with devices like those from <a href=\"https://www.rachio.com\">Rachio</a>.</p>\n<p>This is what led me on my quest to design and build my very own smart sprinkler system for less than $10 using some cheap electronics and <a href=\"https://github.com/homebridge/homebridge\">Homebridge</a>.</p>\n<p>This post outlines how I achieved my goal, see <a href=\"https://github.com/Tommrodrigues/homebridge-web-sprinklers/tree/master/examples\">here</a> for more of a technical how-to.</p>\n<h2>Weather forecasting</h2>\n<p>Using APIs like the <a href=\"https://openweathermap.org/api\">OpenWeatherMap API</a>, you can easily make a request with your location and API key, then get back extensive weather forecasted weather data including whether it is expected to rain, what the high and low temperature will be, when sunrise is, and how cloudy it will be.</p>\n<p>We can take this data, and if it doesn't reach certain thresholds like a minimum temperature for the high and low forecast, or if it is expected to rain, we can cancel the schedule.</p>\n<p>Furthermore, some areas restrict which months/days you are allowed to water your garden, so we can compare the date against this list to ensure we abide by any such regulations.</p>\n<h2>Calculating watering times</h2>\n<p>If our thresholds are met, we can use the weather data to adjust watering times positively or negatively from some default watering duration.</p>\n<p>For example, we might want to increase the watering time if the day is going to be especially hot, but decrease the time if it is going to be cloudy.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQGB//EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAGafmxGuCov/8QAHRAAAgIBBQAAAAAAAAAAAAAAAgUBAwQAERMUNf/aAAgBAQABBQLsWgcNmHGqvsysIp3PSHzf/8QAFREBAQAAAAAAAAAAAAAAAAAAECH/2gAIAQMBAT8Bp//EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAECAQE/AYf/xAAeEAABAgcBAAAAAAAAAAAAAAABABECAxASEyEycv/aAAgBAQAGPwIzYSx5Glfm07chZJpuiuIRNB7K/8QAHRAAAgIBBQAAAAAAAAAAAAAAAREAITEQQXGhsf/aAAgBAQABPyGonYENPEIUJ4H1BnPQl5KQAvaPTP8A/9oADAMBAAIAAwAAABC8z//EABYRAQEBAAAAAAAAAAAAAAAAAAEAIf/aAAgBAwEBPxBAYwt//8QAFxEBAAMAAAAAAAAAAAAAAAAAARARMf/aAAgBAgEBPxAphH//xAAcEAEBAAMAAwEAAAAAAAAAAAABEQAhMVFhcaH/2gAIAQEAAT8QrzJMKCpjJaL00Y1JLhTQam03hKUQTqJCAMRJC9cG+HrBpYX0H3xnV5T9M//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/0be38bb4b94d4b3061fbdeddf2959981/4edc6/data.jpg\"\n        srcset=\"/static/0be38bb4b94d4b3061fbdeddf2959981/b6501/data.jpg 250w,\n/static/0be38bb4b94d4b3061fbdeddf2959981/bb312/data.jpg 500w,\n/static/0be38bb4b94d4b3061fbdeddf2959981/4edc6/data.jpg 1000w,\n/static/0be38bb4b94d4b3061fbdeddf2959981/92dea/data.jpg 1500w,\n/static/0be38bb4b94d4b3061fbdeddf2959981/cbe2c/data.jpg 2000w,\n/static/0be38bb4b94d4b3061fbdeddf2959981/2e69d/data.jpg 2550w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>After this, we can further refine the watering times for each of the zones, as some will require more or less watering than others.</p>\n<p>After we have a duration for each of the zones, we can divide watering over multiple cycles to prevent runoff and improve plant health.</p>\n<p>Finally, we can calculate the total amount of time required to complete the cycles for each of the zones, then subtract this from the sunrise time to get a start time for our watering schedule.</p>\n<p>Doing this ensures that watering will finish by sunrise â€” the best time to finish watering to encourage proper absorption and prevent fungal growth.</p>\n<h2>Implementation</h2>\n<p>Implementing this is fairly simple: we can just hook up a <a href=\"https://www.nodemcu.com/index_en.html\">NodeMCU</a> to a relay board connected to each of our sprinkler zones.</p>\n<p>From here, our scheduling and watering times can be calculated by a the <a href=\"https://github.com/Tommrodrigues/homebridge-web-sprinklers\">homebridge-web-sprinkles</a> plugin, then executed at the correct times by the NodeMCU.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBQb/xAAWAQEBAQAAAAAAAAAAAAAAAAADAQL/2gAMAwEAAhADEAAAAdKCOCyOZLn/xAAbEAACAwADAAAAAAAAAAAAAAACAwEEEQASE//aAAgBAQABBQJfkcWaYcQtMrAowuuNcQN//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAEDAQE/AYx//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BqP/EABwQAAICAgMAAAAAAAAAAAAAAAABAiERIjJBof/aAAgBAQAGPwJdCmlnNOzZ2qOCLj6SUW1Z/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERITFRQWGB/9oACAEBAAE/IY848CGSYO3Ih5ZtWiqBpLJCbxoz/9oADAMBAAIAAwAAABCwH//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAwEBPxDan//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QRGu3/8QAHRABAQACAQUAAAAAAAAAAAAAAREAITFBUWFxkf/aAAgBAQABPxBFDpdhLl8yBQCabLNeM18JZyVLOllxdKBpFMeCgUBEwnPanK99nr5n/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/84c99fd8ba1fbc0faa8c6df8c0b83c2c/4edc6/sprinkler.jpg\"\n        srcset=\"/static/84c99fd8ba1fbc0faa8c6df8c0b83c2c/b6501/sprinkler.jpg 250w,\n/static/84c99fd8ba1fbc0faa8c6df8c0b83c2c/bb312/sprinkler.jpg 500w,\n/static/84c99fd8ba1fbc0faa8c6df8c0b83c2c/4edc6/sprinkler.jpg 1000w,\n/static/84c99fd8ba1fbc0faa8c6df8c0b83c2c/92dea/sprinkler.jpg 1500w,\n/static/84c99fd8ba1fbc0faa8c6df8c0b83c2c/cbe2c/sprinkler.jpg 2000w,\n/static/84c99fd8ba1fbc0faa8c6df8c0b83c2c/2e69d/sprinkler.jpg 2550w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>As a result, we can take a hands-free approach to looking after our garden as everything will be calculated for us in accordance with weather forecast calculations.</p>\n<p>Because we have implemented this with <a href=\"https://www.apple.com/ios/home/\">Apple HomeKit</a>, we can also have manual control over each zone, allowing us fo manually activate and deactivate each zone for whatever reason if we want to override the system.</p>\n<h2>Conclusion</h2>\n<p>Making your own smart sprinkler system is ultimately very simple, and is a great way to save some money.</p>\n<p>With some simple modifications, it also opens up a practically endless number of ways you can calculate watering times and schedules to gain more refined control over your garden.</p>\n<h2>Links</h2>\n<ul>\n<li><a href=\"https://github.com/Tommrodrigues/homebridge-web-sprinklers/tree/master/examples\">Smart Sprinklers</a></li>\n<li><a href=\"https://github.com/Tommrodrigues/homebridge-web-sprinklers\">homebridge-web-sprinkles</a></li>\n<li><a href=\"https://tommrodrigues.github.io/blog/my-dollar99-apple-smart-home\">My $99 Apple Smart Home</a></li>\n</ul>\n<p>P.S. Buy your parts from AliExpress, itâ€™s way cheaper than Amazon!</p>"}},"pageContext":{"slug":"my-diy-smart-sprinklers"}}}